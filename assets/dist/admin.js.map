{"version":3,"sources":["webpack:///webpack/bootstrap b25f55ccefb0f44ed3cd","webpack:///./js/admin.js","webpack:///./css/admin.css"],"names":["Vue","component","template","data","forms","methods","init","self","action","jQuery","ajax","url","ajaxurl","method","success","unescapeObj","error","console","log","addForm","$emit","title","delivery_method","submit_button_text","confirmation_message","items","editForm","form","deleteForm","index","html","addClass","setTimeout","removeClass","obj","j","JSON","stringify","split","join","parse","mounted","activeItem","props","addItem","push","text","value","type","options","length","setItemTextFocus","deleteItem","splice","addOption","item","undefined","deleteOption","editItem","save","isFormValid","cancel","showToast","i","vm","nextTick","$refs","focus","message","isError","toast","watch","newVal","oldVal","boffoViews","el","currentForm","currentView","loadFormDetails","showListView","listView"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b25f55ccefb0f44ed3cd","import '../css/admin.css';\n\nVue.component('boffo-list-view', {\n  template: '#boffo-list-template',\n  data: function () {\n    return {\n      forms: []\n    }\n  },\n  methods: {\n    init() {\n      var self = this;\n\n      var data = {\n        action: 'get_boffo_admin_forms'\n      };\n\n      jQuery.ajax({\n        url: ajaxurl,\n        method: 'POST',\n        data: data,\n        success: function (data) {\n          self.forms = self.unescapeObj(data);\n        },\n        error: function (error) {\n          console.log('error', error);\n        }\n      });\n    },\n    addForm() {\n      this.$emit('edit-form', {\n        title: '',\n        delivery_method: 'email',\n        submit_button_text: 'Send',\n        confirmation_message: 'Thanks for connecting with us!',\n        items: []\n      });\n    },\n    editForm(form) {\n      this.$emit('edit-form', form);\n    },\n    deleteForm(form, index) {\n      var self = this;\n\n      var data = {\n        action: 'delete_boffo_admin_form',\n        form: form\n      };\n\n      jQuery.ajax({\n        url: ajaxurl,\n        method: 'POST',\n        data: data,\n        success: function (data) {\n          self.init();\n\n          jQuery('#boffo-views .toast').html('Successfully removed!').addClass('on');\n\n          setTimeout(function () {\n            jQuery('#boffo-views .toast').removeClass('on');\n          }, 4000);\n        },\n        error: function (error) {\n          console.log('error', error);\n        }\n      });\n    },\n    unescapeObj(obj) {\n      var j = JSON.stringify(obj);\n\n      j = j.split('\\\\').join('');\n\n      return JSON.parse(j);\n    }\n  },\n  mounted: function () {\n    this.init();\n  }\n});\n\nVue.component('boffo-detail-view', {\n  template: '#boffo-detail-template',\n  data: function () {\n    return {\n      activeItem: 0\n    }\n  },\n  props: ['form'],\n  methods: {\n    addItem() {\n      this.form.items.push({ text: '', value: '', type: 'text', options: [{ text: '' }] });\n      this.activeItem = this.form.items.length - 1;\n      this.setItemTextFocus(this.activeItem);\n    },\n    deleteItem(index) {\n      this.activeItem = (this.activeItem - 1) < 0 ? 0 : (this.activeItem - 1);\n      this.form.items.splice(index, 1);\n    },\n    addOption(item) {\n      if (item.options == undefined) item.options = [];\n\n      item.options.push({ text: '' });\n    },\n    deleteOption(item, index) {\n      item.options.splice(index, 1);\n    },\n    editItem(index) {\n      this.activeItem = index;\n      this.setItemTextFocus(index);\n    },\n    save(form) {\n      if (!this.isFormValid(form)) return;\n\n      var data = {\n        action: 'post_boffo_admin_form',\n        form: form\n      };\n\n      jQuery.ajax({\n        url: ajaxurl,\n        method: 'POST',\n        data: data,\n        success: function (data) {\n          jQuery('#boffo-views .toast').html('Flow successfully saved!').removeClass('error').addClass('on');\n\n          setTimeout(function () {\n            jQuery('#boffo-views .toast').removeClass('on');\n          }, 4000);\n        },\n        error: function (error) {\n          \n        }\n      });\n    },\n    cancel() {\n      this.$emit('cancel');\n    },\n    isFormValid(form) {\n      if (form.title.length < 1) {\n        this.showToast('Please add a title.', true);\n\n        return false;\n      }\n\n      if (form.submit_button_text.length < 1) {\n        this.showToast('Please add a submit button.', true);\n\n        return false;\n      }\n\n      if (form.confirmation_message.length < 1) {\n        this.showToast('Please add a confirmaton message.', true);\n\n        return false;\n      }\n\n      if (form.items.length < 1) {\n        this.showToast('Please add steps.', true);\n\n        return false;\n      }\n\n      for (var i = 0; i < form.items.length; i++) {\n        if (form.items[i].text.length < 1) {\n          this.showToast('Please make sure your steps have lead-in copy.', true);\n\n          return false;\n        }\n      }\n\n      return true;\n    },\n    setItemTextFocus(index) {\n      var vm = this;\n\n      Vue.nextTick(function () {\n        if (vm.form.items.length < 1) {\n          vm.$refs['titleInput'].focus();\n        } else {\n          vm.$refs['itemTextInput'][index].focus();\n        }\n      });\n    },\n    showToast(message, isError) {\n      var toast = jQuery('#boffo-views .toast');\n\n      toast.html(message).removeClass('error').addClass('on');\n\n      if (isError) toast.addClass('error');\n\n      setTimeout(function () {\n        toast.removeClass('on');\n      }, 4000);\n    }\n  },\n  mounted: function () {\n  },\n  watch: {\n    form: function (newVal, oldVal) {\n      this.activeItem = 0;\n      this.setItemTextFocus(0);\n    }\n  }\n});\n\nvar boffoViews = new Vue({\n  el: '#boffo-views',\n  data: function () {\n    return {\n      currentForm: {},\n      currentView: 'listView'\n    }\n  },\n  methods: {\n    addForm() {\n      this.currentForm = {\n        title: '',\n        delivery_method: 'email',\n        submit_button_text: 'Send',\n        confirmation_message: 'Thanks for connecting with us!',\n        items: []\n      };\n      this.currentView = 'detailView';\n    },\n    loadFormDetails(form) {\n      this.currentForm = form;\n      this.currentView = 'detailView';\n    },\n    showListView() {\n      this.currentForm = {\n        title: '',\n        items: []\n      };\n      this.currentView = 'listView';\n\n      this.$refs.listView.init()\n    }\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./js/admin.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./css/admin.css\n// module id = 1\n// module chunks = 1"],"sourceRoot":""}